# =============================================================================
# WeSpring Auth Server - 开发环境配置
# =============================================================================
# 这里包含特定项目的开发配置和敏感信息
# 生产环境请勿使用此配置文件
# =============================================================================

spring:
  application:
    # 项目特定的应用名称
    name: ffvtraceability-auth-server

  # 开发环境数据库配置
  datasource:
    # url: jdbc:postgresql://127.0.0.1:5432/ruichuangqi_dev
    # 默认可以使用 DB_NAME 环境变量覆盖
    username: postgres
    password: 123456
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000

  # 开发环境SQL初始化配置
  sql:
    init:
      mode: always
      continue-on-error: true
      schema-locations:
        - classpath:schema.sql
      data-locations:
        - classpath:data-base.sql
        - classpath:data-dev.sql

  # 开发环境JPA配置 - 启用SQL日志
  jpa:
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  # 开发环境邮件配置 - 使用项目特定的Gmail账户
  mail:
    host: smtp.gmail.com
    port: 587
    username: whilliy@gmail.com
    password: nchplogyhbumjgyc
    properties:
      mail:
        debug: true
        smtp:
          connection-timeout: 30000
          timeout: 30000
          write-timeout: 30000
          auth: true
          starttls:
            enable: true
            required: true
          ssl:
            trust: smtp.gmail.com

# 开发环境服务器配置 - 显示详细错误信息
server:
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: always
    include-exception: true

# 项目特定的密码重置配置
password:
  token:
    create-password-url: https://fp.ablueforce.com/change-password
    expire-in-hours: 24

# 开发环境JWT密钥配置
security:
  jwt:
    key-store: classpath:keys/jwt-signing-keys.jks
    key-store-password: ffvtraceability
    key-alias: jwt-signing-key
    private-key-passphrase: ffvtraceability

# 开发环境日志配置 - 启用详细日志
logging:
  level:
    root: INFO
    org.springframework.security: DEBUG
    org.springframework.security.oauth2: DEBUG
    org.springframework.web: DEBUG
    org.dddml.ffvtraceability: DEBUG

# 开发环境授权服务器配置
auth-server:
  # 项目特定的CORS配置 - 包含所有开发和测试环境地址
  cors:
    allowed-origins: >-
      http://localhost:8888,
      http://localhost:8080,
      http://localhost:3000,
      http://127.0.0.1:3000,
      http://localhost:1023,
      https://al.u2511175.nyat.app:50518,
      https://v0-beauty-consultant-ai-interface.vercel.app,
      https://kzmjq05ormpml1bob042.lite.vusercontent.net,
      https://shimmer-shell-auth.lovable.app
    allowed-methods: GET,POST,PUT,DELETE,OPTIONS
    allowed-headers: Authorization,Content-Type,Accept,X-Requested-With,Origin,Sec-Fetch-Mode,Sec-Fetch-Site,Sec-Fetch-Dest
    allow-credentials: true
  
  # 项目特定的Web客户端配置
  web-clients:
    allowed-client-ids: ffv-client,other-web-client
    client-secrets: secret,other-secret
  
  # 开发工具配置
  dev-tools:
    enabled: true  # 启用开发工具API（密码编码等）

# 开发环境微信配置 - 使用测试回调地址
wechat:
  mp:
    redirect-uri: http://192.168.0.103:9000/wechat/callback

# 开发环境短信配置 - 使用火山引擎
sms:
  provider: huoshan
