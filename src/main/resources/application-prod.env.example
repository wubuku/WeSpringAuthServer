# =============================================================================
# WeSpring Auth Server - 生产环境变量配置示例
# =============================================================================
# 复制此文件为 .env 或设置系统环境变量
# 所有标记为 [必需] 的变量在生产环境中必须设置
# =============================================================================

# =============================================================================
# 数据库配置 [必需]
# =============================================================================
DB_HOST=your-database-host
DB_PORT=5432
DB_NAME=your-database-name
DB_USERNAME=your-database-username
DB_PASSWORD=your-database-password
DB_MAX_POOL_SIZE=20
DB_MIN_IDLE=10

# =============================================================================
# 服务器配置
# =============================================================================
SERVER_PORT=9000
SPRING_PROFILES_ACTIVE=prod

# =============================================================================
# OAuth2 授权服务器配置 [必需]
# =============================================================================
AUTH_SERVER_ISSUER=https://your-auth-server.com

# =============================================================================
# OAuth2 Cookie 安全配置 [必需]
# =============================================================================
OAUTH2_COOKIE_DOMAIN=.your-domain.com
OAUTH2_COOKIE_SECURE=true
OAUTH2_COOKIE_SAME_SITE=Lax
OAUTH2_COOKIE_MAX_AGE=2592000

# =============================================================================
# CORS 跨域配置 [必需]
# =============================================================================
CORS_ALLOWED_ORIGINS=https://app.your-domain.com,https://admin.your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,X-Requested-With,Origin
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# Web 客户端配置 [必需]
# =============================================================================
WEB_CLIENT_IDS=your-web-client-id
WEB_CLIENT_SECRETS=your-web-client-secret

# =============================================================================
# JWT 密钥配置 [必需]
# =============================================================================
JWT_KEYSTORE_PATH=/path/to/your/keystore.jks
JWT_KEYSTORE_PASSWORD=your-keystore-password
JWT_KEY_ALIAS=your-key-alias
JWT_KEY_PASSWORD=your-private-key-password

# =============================================================================
# 邮件服务配置 [必需]
# =============================================================================
MAIL_HOST=smtp.your-mail-provider.com
MAIL_PORT=587
MAIL_USERNAME=your-email@your-domain.com
MAIL_PASSWORD=your-email-password

# =============================================================================
# 密码重置配置 [必需]
# =============================================================================
PASSWORD_RESET_URL=https://your-frontend.com/reset-password
PASSWORD_TOKEN_EXPIRE_HOURS=24

# =============================================================================
# 认证状态加密配置 [必需]
# =============================================================================
AUTH_STATE_PASSWORD=your-very-strong-encryption-password
AUTH_STATE_SALT=your-16-char-hex-salt

# =============================================================================
# 微信登录配置 [可选]
# =============================================================================
WECHAT_APP_ID=your-wechat-app-id
WECHAT_APP_SECRET=your-wechat-app-secret
WECHAT_TOKEN=your-wechat-token
WECHAT_AES_KEY=your-wechat-aes-key
WECHAT_REDIRECT_URI=https://your-auth-server.com/wechat/callback

# =============================================================================
# 短信服务配置 [可选]
# =============================================================================
SMS_PROVIDER=aliyun
SMS_CODE_LENGTH=6
SMS_CODE_EXPIRATION=5

# 阿里云短信配置
ALIYUN_SMS_ACCESS_KEY_ID=your-aliyun-access-key-id
ALIYUN_SMS_ACCESS_KEY_SECRET=your-aliyun-access-key-secret
ALIYUN_SMS_SIGN_NAME=your-aliyun-sign-name
ALIYUN_SMS_TEMPLATE_CODE=your-aliyun-template-code
ALIYUN_SMS_REGION=cn-hangzhou

# 火山引擎短信配置
HUOSHAN_SMS_ACCESS_KEY_ID=your-huoshan-access-key-id
HUOSHAN_SMS_SECRET_KEY=your-huoshan-secret-key
HUOSHAN_SMS_ENDPOINT=https://sms.volcengineapi.com
HUOSHAN_SMS_SIGN_NAME=your-huoshan-sign-name
HUOSHAN_SMS_TEMPLATE_ID=your-huoshan-template-id
HUOSHAN_SMS_ACCOUNT=your-huoshan-sms-account
HUOSHAN_SMS_REGION=cn-north-1

# =============================================================================
# 日志配置 [可选]
# =============================================================================
LOG_LEVEL_ROOT=WARN
LOG_LEVEL_SECURITY=INFO
LOG_LEVEL_OAUTH2=INFO
LOG_LEVEL_OIDC=INFO
LOG_LEVEL_LOGOUT=INFO
LOG_LEVEL_SESSION=INFO
LOG_LEVEL_WEB=WARN
LOG_LEVEL_APP=INFO
# 禁止健康检查和负载均衡器的噪音日志（生产环境推荐设置为ERROR）
LOG_LEVEL_DISPATCHER=ERROR
LOG_LEVEL_SESSION_FILTER=ERROR
LOG_LEVEL_WEB_FILTER=ERROR
LOG_FILE_PATH=/var/log/auth-server/auth-server.log

# =============================================================================
# Spring Security 调试配置 [可选]
# =============================================================================
# 生产环境强烈建议设置为false，开发调试时可以设置为true
SPRING_SECURITY_DEBUG=false